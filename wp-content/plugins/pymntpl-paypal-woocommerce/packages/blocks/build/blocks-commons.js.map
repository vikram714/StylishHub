{"version":3,"file":"blocks-commons.js","mappings":"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","sources":["webpack://wcPPCP/./packages/blocks/assets/js/hooks/use-load-paypal-script.js","webpack://wcPPCP/./packages/blocks/assets/js/hooks/use-process-payment-failure.js","webpack://wcPPCP/./packages/blocks/assets/js/hooks/use-breakpoint-width.js","webpack://wcPPCP/./packages/blocks/assets/js/paylater-messaging/index.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://wcPPCP/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-paypal-options.js","webpack://wcPPCP/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-process-payment.js","webpack://wcPPCP/./packages/blocks/assets/js/payment-methods/paypal/index.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://wcPPCP/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-validate-checkout.js","webpack://wcPPCP/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-paypal-funding-sources.js","webpack://wcPPCP/./packages/blocks/assets/js/utils.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://wcPPCP/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"],"sourcesContent":["import {useEffect, useState} from \"@wordpress/element\";\nimport {loadPayPalSdk} from \"@ppcp/utils\";\n\n/*\n'client-id': this.getClientId(),\n'components': this.settings?.components,\n'currency': this.getOption('currency'),\n'intent': this.getOption('intent'),\n'vault': this.getOption('vault')\n */\n\n/**\n *\n * @param params - client-id, components, currency, intent, vault\n * @returns {*}\n */\nexport const useLoadPayPalScript = (params) => {\n    const [paypal, setPayPal] = useState(null);\n\n    useEffect(() => {\n        if (!paypal) {\n            loadPayPalSdk(params).then(paypal => setPayPal(paypal));\n        }\n    }, [paypal]);\n\n    return paypal;\n}","import {useEffect} from '@wordpress/element';\n\nexport const useProcessPaymentFailure = ({event, responseTypes, messageContext = null, setPaymentData}) => {\n    useEffect(() => {\n        const unsubscribe = event((data) => {\n            if (data?.processingResponse?.paymentDetails?.ppcpErrorMessage) {\n                setPaymentData(null);\n                const message = data.processingResponse.paymentDetails.ppcpErrorMessage;\n                return {\n                    type: responseTypes.ERROR,\n                    message,\n                    messageContext\n                }\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [event]);\n}\n\nexport default useProcessPaymentFailure;","import {useState, useEffect, useRef} from '@wordpress/element';\n\nexport const useBreakpointWidth = ({width, node, className = 'wc-ppcp-sm__container'}) => {\n    const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n    const [element, setElement] = useState(node);\n    useEffect(() => {\n        setElement(node);\n    }, [node]);\n\n    useEffect(() => {\n        const handleResize = () => setWindowWidth(window.innerWidth);\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    useEffect(() => {\n        if (element) {\n            if (element.clientWidth <= width) {\n                element.classList.add(className);\n            } else {\n                element.classList.remove(className);\n            }\n        }\n    }, [windowWidth, width, element]);\n}","import {useEffect, useRef, useMemo} from '@wordpress/element';\nimport {ExperimentalOrderMeta, TotalsWrapper} from '@woocommerce/blocks-checkout';\nimport {registerPlugin} from '@wordpress/plugins';\nimport {getSetting} from '@woocommerce/settings';\nimport {useLoadPayPalScript} from \"../hooks\";\n\nconst data = getSetting('paylaterParams');\n\nconst PayLaterMessaging = ({cart, extensions, context}) => {\n    const isEnabled = data.enabled;\n    const el = useRef(null);\n    const {cartTotals} = cart;\n    const {currency_code: currency, total_price} = cartTotals;\n    const paypal = useLoadPayPalScript(getSetting('paypalQueryParams'));\n\n    const options = useMemo(() => {\n        return {\n            amount: total_price / (10 ** cartTotals.currency_minor_unit),\n            currency,\n            placement: 'payment',\n            ...data.options\n        }\n    });\n\n    useEffect(() => {\n        if (paypal) {\n            paypal.Messages(options).render(el.current);\n        }\n    }, [paypal, options]);\n    if (isEnabled) {\n        return (\n            <TotalsWrapper>\n                <div className='wc-block-components-totals-item'>\n                    <div ref={el} className='wc-ppcp-paylater-msg__container'/>\n                </div>\n            </TotalsWrapper>\n        )\n    }\n    return null;\n}\n\nconst render = () => {\n    return (\n        <ExperimentalOrderMeta>\n            <PayLaterMessaging/>\n        </ExperimentalOrderMeta>\n    )\n}\n\nregisterPlugin('wc-ppcp', {render, scope: 'woocommerce-checkout'});\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import {useEffect, useCallback, useRef} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport {convertPayPalAddressToCart, extractShippingMethod} from \"@ppcp/utils\";\nimport {\n    extractShippingRateParams,\n    getRestPath,\n    isAddressValid\n} from '../../../utils';\n\nexport const usePayPalOptions = (\n    {\n        isExpress,\n        paypal,\n        vault,\n        buttonStyles,\n        shippingData,\n        billing,\n        setError,\n        setPaymentData,\n        onClick,\n        onClose\n    }) => {\n    const currentShippingData = useRef(shippingData);\n    const currentBilling = useRef(billing);\n    const currentData = useRef({onClick, onClose, buttonState: true, actions: {}});\n    useEffect(() => {\n        currentShippingData.current = shippingData;\n        currentBilling.current = billing;\n        currentData.current = {...currentData.current, onClick, onClose};\n        const {needsShipping, shippingAddress} = shippingData;\n        const billingAddress = billing.billingData;\n        // if address fields not valid, disable the buttons\n        if (!isAddressValid(billingAddress) || (needsShipping && !isAddressValid(shippingAddress))) {\n            disableButtons()\n        } else {\n            enableButtons();\n        }\n    });\n\n    const disableButtons = useCallback(() => {\n        Object.keys(currentData.current.actions).forEach(key => {\n            currentData.current.actions[key].disable();\n            currentData.current.buttonState = false;\n        });\n    }, []);\n\n    const enableButtons = useCallback(() => {\n        Object.keys(currentData.current.actions).forEach(key => {\n            currentData.current.actions[key].enable();\n            currentData.current.buttonState = true;\n        });\n    }, []);\n\n    const getOptions = useCallback(fundingSource => {\n        const {needsShipping, shippingAddress} = currentShippingData.current;\n        const billingAddress = billing.billingData;\n        const options = {\n            fundingSource: fundingSource,\n            style: getButtonStyle(fundingSource),\n            onApprove,\n            onError\n        };\n        if (isExpress) {\n            options.onClick = () => currentData.current.onClick();\n            options.onCancel = () => currentData.current.onClose()\n        } else {\n            options.onClick = () => {\n                setError(null);\n                // if address is not valid, show a notification that address data must be filled out first\n                if (!isExpress && !currentData.current.buttonState) {\n                    if (needsShipping) {\n                        setError(__('Please fill out all billing and shipping fields before clicking PayPal.', 'pymntpl-paypal-woocommerce'));\n                    } else {\n                        setError(__('Please fill out all billing fields before clicking PayPal.', 'pymntpl-paypal-woocommerce'));\n                    }\n                }\n            }\n        }\n        options.onInit = (data, actions) => {\n            if (!isExpress) {\n                currentData.current.buttonState = true;\n                currentData.current.actions[fundingSource] = actions;\n                if (!isAddressValid(billingAddress) || (needsShipping && !isAddressValid(shippingAddress))) {\n                    disableButtons();\n                }\n            }\n        }\n        if (isCheckoutFlow()) {\n            options.createOrder = createOrder;\n            if (isExpress && needsShipping && fundingSource !== 'venmo') {\n                options.onShippingChange = onShippingChange;\n            }\n        } else {\n            options.createBillingAgreement = createBillingAgreement;\n        }\n\n        return options;\n    }, [\n        paypal,\n        isExpress,\n        onApprove,\n        onError,\n        createOrder,\n        createBillingAgreement,\n        onShippingChange,\n        setError\n    ]);\n\n    const getButtonStyle = useCallback(fundingSource => {\n        let styles = {};\n        switch (fundingSource) {\n            case paypal.FUNDING.PAYPAL:\n                styles = buttonStyles.paypal;\n                break;\n            case paypal.FUNDING.PAYLATER:\n                styles = buttonStyles.paylater;\n                break;\n            case paypal.FUNDING.CREDIT:\n                const colors = ['black', 'white'];\n                const color = colors.includes(buttonStyles.paylater.color) ? buttonStyles.paylater.color : 'darkblue';\n                styles = {...buttonStyles.paylater, color};\n                break;\n            case paypal.FUNDING.CARD:\n                styles = buttonStyles.card;\n                break;\n            case paypal.FUNDING.VENMO:\n                styles = buttonStyles.venmo;\n                break;\n        }\n        return styles;\n    }, [paypal, buttonStyles]);\n\n    const isCheckoutFlow = useCallback(() => !vault, [vault]);\n\n    const onApprove = useCallback(async (data, actions) => {\n        const paymentData = {\n            order: {},\n            orderId: data.orderID,\n            billingToken: data.billingToken || '',\n            billingTokenData: null\n        }\n        if (data.billingToken) {\n            try {\n                paymentData.billingTokenData = await handleBillingToken(data.billingToken);\n                setPaymentData(paymentData);\n            } catch (error) {\n                setError(error);\n            }\n        } else {\n            actions.order.get().then(response => {\n                setPaymentData({...paymentData, order: response});\n            }).catch(error => {\n                setError(error);\n            });\n        }\n    }, [setError, handleBillingToken]);\n\n    const onShippingChange = useCallback((data, actions) => {\n        const shippingData = currentShippingData.current;\n        const {setSelectedRates} = shippingData;\n        const intermediateAddress = convertPayPalAddressToCart(data?.shipping_address || {}, true);\n        const selectedShippingOption = data?.selected_shipping_option?.id || '';\n        return apiFetch({\n            method: 'POST',\n            url: getRestPath('wc-ppcp/v1/cart/shipping'),\n            data: {\n                order_id: data.orderID,\n                address: intermediateAddress,\n                shipping_method: extractShippingMethod(selectedShippingOption),\n                payment_method: 'ppcp'\n            }\n        }).then(response => {\n            if (response.code) {\n                return actions.reject();\n            } else {\n                return actions.resolve();\n            }\n        }).catch(error => {\n            return actions.reject();\n        }).finally(() => {\n            if (selectedShippingOption) {\n                setSelectedRates(...extractShippingRateParams(selectedShippingOption))\n            }\n        })\n    }, []);\n\n    const onError = useCallback(error => {\n        if (error?.message?.indexOf('Window is closed') > -1) {\n            return;\n        }\n        setError(error);\n    }, [setError]);\n\n    const createOrder = useCallback(async (data, actions) => {\n        const {needsShipping} = currentShippingData.current;\n        try {\n            const response = await apiFetch({\n                method: 'POST',\n                url: getRestPath('wc-ppcp/v1/cart/order'),\n                data: {payment_method: 'ppcp', address_provided: !isExpress && needsShipping}\n            });\n            return response;\n        } catch (error) {\n            console.log(error.message);\n            throw error;\n        }\n    }, []);\n\n    const createBillingAgreement = useCallback((data, actions) => {\n        return apiFetch({\n            method: 'POST',\n            url: getRestPath('/wc-ppcp/v1/billing-agreement/token'),\n            data: {\n                context: 'checkout',\n                payment_method: 'ppcp',\n            }\n        }).then(token => {\n            return token;\n        }).catch(error => setError(error));\n    }, [setError]);\n\n    const handleBillingToken = useCallback(async (billingToken) => {\n        try {\n            return apiFetch({\n                method: 'GET',\n                path: `/wc-ppcp/v1/billing-agreement/token/${billingToken}`\n            });\n        } catch (error) {\n            throw error;\n        }\n    }, []);\n\n    return {getOptions};\n}","import {useState, useEffect, useRef, useCallback} from '@wordpress/element';\nimport {convertPayPalAddressToCart, extractFullName} from \"@ppcp/utils\";\nimport {isEmpty} from 'lodash';\nimport {getSetting} from '@woocommerce/settings';\nimport {\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../../utils\";\n\nconst isOlderVersion = getSetting('ppcpGeneralData').isOlderVersion\n\nexport const useProcessPayment = (\n    {\n        onSubmit,\n        billingData,\n        shippingData,\n        onPaymentProcessing,\n        responseTypes,\n        activePaymentMethod,\n        paymentMethodId\n    }) => {\n    const [paymentData, setPaymentData] = useState(null);\n    const currentPaymentData = useRef(null);\n    const currentBillingData = useRef(null);\n    const currentShippingData = useRef(null);\n\n    useEffect(() => {\n        currentPaymentData.current = paymentData;\n        currentBillingData.current = billingData;\n        currentShippingData.current = shippingData;\n    });\n\n    useEffect(() => {\n        if (!isEmpty(paymentData)) {\n            onSubmit();\n        }\n    }, [paymentData, onSubmit]);\n\n    const convertOrderDataToAddress = useCallback((order) => {\n        const {needsShipping} = currentShippingData.current;\n        let address = {};\n        if (!isEmpty(order?.payer?.address?.address_line_1)) {\n            address = convertPayPalAddressToCart(order.payer.address);\n        } else if (needsShipping && !isEmpty(order?.purchase_units?.[0]?.shipping)) {\n            const shipping = order.purchase_units[0].shipping;\n            address = convertPayPalAddressToCart(shipping.address);\n        }\n        if (order?.payer?.name) {\n            address = {...address, ...extractName(order.payer.name)};\n        }\n        if (order?.payer?.email_address) {\n            address = {...address, email: order.payer.email_address};\n        }\n        if (order?.payer?.phone?.phone_number?.national_number) {\n            address = {...address, phone: order.payer.phone.phone_number.national_number};\n        }\n        return address;\n    }, []);\n\n    const convertBillingTokenToAddress = useCallback((data, type = 'billing') => {\n        let address = {};\n        const {needsShipping} = currentShippingData.current;\n        if (type === 'billing') {\n            if (data?.payer_info?.billing_address) {\n                address = convertPayPalAddressToCart(data.payer_info.billing_address);\n            }\n        } else {\n            if (needsShipping && data.shipping_address) {\n                address = convertPayPalAddressToCart(data.shipping_address);\n            }\n        }\n        if (data?.payer_info?.first_name) {\n            address = {...address, first_name: data.payer_info.first_name};\n        }\n        if (data?.payer_info?.last_name) {\n            address = {...address, last_name: data.payer_info.last_name};\n        }\n        if (data?.payer_info?.email) {\n            address = {...address, email: data.payer_info.email};\n        }\n        if (data?.payer_info?.phone) {\n            address = {...address, phone: data.payer_info.phone};\n        }\n        return address;\n    }, []);\n\n    const extractName = useCallback((name) => {\n        let first_name, last_name;\n        if (Array.isArray(name)) {\n            [first_name, last_name] = name;\n        } else {\n            ({given_name: first_name, surname: last_name} = name);\n        }\n        return {first_name, last_name};\n    }, []);\n\n    const convertShippingAddress = useCallback(order => {\n        let address = {};\n        if (order?.purchase_units?.[0]?.shipping) {\n            const shipping = order.purchase_units[0].shipping;\n            address = convertPayPalAddressToCart(shipping.address);\n            if (shipping?.name?.full_name) {\n                const name = extractFullName(shipping.name.full_name);\n                address = {...address, ...extractName(name)};\n            }\n        }\n        return address;\n    }, []);\n\n    useEffect(() => {\n        if (activePaymentMethod === paymentMethodId) {\n            const unsubscribe = onPaymentProcessing(() => {\n                const billingData = currentBillingData.current;\n                const shippingData = currentShippingData.current;\n                const {shippingAddress, needsShipping} = shippingData;\n                const {orderId, billingToken, billingTokenData = null, order = {}} = currentPaymentData.current;\n                const response = {\n                    meta: {\n                        paymentMethodData: {\n                            ppcp_paypal_order_id: orderId,\n                            ppcp_billing_token: billingToken\n                        },\n                        ...(isOlderVersion &&\n                            {\n                                billingData: {\n                                    ...DEFAULT_BILLING_ADDRESS,\n                                    ...billingData,\n                                    ...convertOrderDataToAddress(order),\n                                    ...(billingTokenData && convertBillingTokenToAddress(billingTokenData))\n                                }\n                            }),\n                        billingAddress: {\n                            ...DEFAULT_BILLING_ADDRESS,\n                            ...billingData,\n                            ...convertOrderDataToAddress(order),\n                            ...(billingTokenData && convertBillingTokenToAddress(billingTokenData))\n                        }\n                    }\n                }\n                if (needsShipping) {\n                    if (isOlderVersion) {\n                        response.meta.shippingData = {\n                            address: {\n                                ...shippingAddress,\n                                ...convertShippingAddress(order),\n                                ...(billingTokenData && convertBillingTokenToAddress(billingTokenData, 'shipping'))\n                            }\n                        }\n                    } else {\n                        response.meta.shippingAddress = {\n                            ...DEFAULT_SHIPPING_ADDRESS,\n                            ...shippingAddress,\n                            ...convertShippingAddress(order),\n                            ...(billingTokenData && convertBillingTokenToAddress(billingTokenData, 'shipping'))\n                        }\n                    }\n                }\n                return {type: responseTypes.SUCCESS, ...response};\n            });\n\n            return () => unsubscribe();\n        }\n    }, [onPaymentProcessing, activePaymentMethod]);\n\n    return {paymentData, setPaymentData};\n}","import {useState, useCallback} from '@wordpress/element';\nimport {registerPaymentMethod, registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {getSetting} from '@woocommerce/settings';\nimport {__, sprintf} from '@wordpress/i18n';\nimport {useBreakpointWidth, useLoadPayPalScript} from \"../../hooks\";\nimport {usePayPalOptions, usePayPalFundingSources, useProcessPayment, useValidateCheckout} from \"./hooks\";\nimport './styles.scss';\nimport {useProcessPaymentFailure} from \"../../hooks\";\nimport {isAddressValid, isUserAdmin} from \"../../utils\";\n\nconst getData = (key) => {\n    const data = getSetting(key);\n    return (key, defaultValue = null) => {\n        if (!data.hasOwnProperty(key)) {\n            data[key] = defaultValue;\n        }\n        return data[key];\n    };\n}\n\nconst data = getData('ppcp_data');\nconst generalData = getData('ppcpGeneralData');\n\nconst isExpressEnabled = () => {\n    const sections = ['paypalSections', 'payLaterSections', 'creditCardSections', 'venmoSections'];\n    for (const section of sections) {\n        if (data(section, []).includes('express_checkout')) {\n            return true;\n        }\n    }\n    return false;\n}\n\nconst ExpressPaymentMethod = (props) => {\n    return <PayPalPaymentMethod\n        context={'express_checkout'}\n        isExpress={true}\n        paymentMethodId='paymentplugins_ppcp_express'\n        {...props}/>;\n}\n\nconst PayPalPaymentMethod = (\n    {\n        isExpress = false,\n        context,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        onError,\n        onClick,\n        onClose,\n        onSubmit,\n        activePaymentMethod,\n        paymentMethodId,\n        ...props\n    }) => {\n    const [error, setError] = useState(false);\n    const queryParams = getSetting('paypalQueryParams');\n    const vault = queryParams.vault === 'true';\n    const {billingData} = billing;\n    const {\n        onPaymentProcessing,\n        onCheckoutAfterProcessingWithError,\n        onCheckoutValidationBeforeProcessing\n    } = eventRegistration;\n    const {responseTypes, noticeContexts} = emitResponse;\n    const [buttonsContainer, setButtonsContainer] = useState();\n\n    useBreakpointWidth({width: 375, node: buttonsContainer});\n\n    if (!isExpress) {\n        onError = useCallback((error) => {\n            setError(error?.message ? error.message : error);\n        }, []);\n    }\n\n    const setButtonContainerRef = useCallback(el => {\n        setButtonsContainer(el?.parentElement?.parentElement);\n    }, []);\n\n    const {paymentData, setPaymentData} = useProcessPayment({\n        onSubmit,\n        billingData,\n        shippingData,\n        onPaymentProcessing,\n        responseTypes,\n        activePaymentMethod,\n        paymentMethodId\n    });\n\n    useProcessPaymentFailure({\n        event: onCheckoutAfterProcessingWithError,\n        responseTypes,\n        messageContext: isExpress ? noticeContexts.EXPRESS_PAYMENTS : null,\n        setPaymentData\n    });\n\n    useValidateCheckout({\n        isExpress,\n        onCheckoutValidationBeforeProcessing,\n        paymentData\n    })\n\n    const paypal = useLoadPayPalScript(queryParams);\n\n    const {getOptions} = usePayPalOptions({\n        isExpress,\n        paypal,\n        vault,\n        intent: queryParams.intent,\n        buttonStyles: data('buttons'),\n        billing,\n        shippingData,\n        eventRegistration,\n        setError: onError,\n        setPaymentData,\n        onClick,\n        onClose\n    });\n    const sources = usePayPalFundingSources({\n        data,\n        paypal,\n        context,\n        vault\n    });\n    const cancelPayment = e => {\n        e.preventDefault();\n        setPaymentData(null);\n    }\n    if (isExpress && paymentData) {\n        const validAddress = isAddressValid(billingData);\n        return (\n            <div>\n                {!validAddress &&\n                    <p className='wc-ppcp-payment__notice'>{__('Please fill out all required fields and click Place Order.', 'pymntpl-paypal-woocommerce')}</p>}\n                {isUserAdmin() && !validAddress &&\n                    <p className='wc-ppcp-payment__notice'>{__('Admin notice: In order for customer billing address details to be auto-populated you ' +\n                        'must contact PayPal Support and request this feature.', 'pymntpl-paypal-woocommerce')}</p>}\n            </div>\n        )\n    }\n    if (!isExpress && paymentData) {\n        return (\n            <>\n                <div className={'wc-ppcp-order-review__message'}>\n                    {__('Your PayPal payment method is ready to be processed. Please review your order details then click Place Order',\n                        'pymntpl-paypal-woocommerce')}\n                </div>\n                <a href={'#'} onClick={cancelPayment} className={'wc-ppcp-cancel__payment'}>{__('Cancel', 'pymntpl-paypal-woocommerce')}</a>\n            </>\n        );\n    }\n    if (paypal && sources) {\n        const Button = paypal.Buttons.driver(\"react\", {React, ReactDOM});\n        const BUTTONS = sources.map(source => {\n            const options = getOptions(source);\n            const button = paypal.Buttons(options);\n            return button.isEligible() ? <Button key={source} {...options}/> : null;\n        });\n        return (\n            <>\n                {!isExpress && <ErrorMessage msg={error}/>}\n                <div className='wc-ppcp-paypal__buttons' ref={setButtonContainerRef}>\n                    {BUTTONS}\n                </div>\n            </>\n        );\n    }\n    return null;\n}\n\nconst PaymentMethodLabel = ({components, title, icons, id}) => {\n    if (!Array.isArray(icons)) {\n        icons = [icons];\n    }\n    const {PaymentMethodLabel: Label, PaymentMethodIcons} = components;\n    return (\n        <div className={`wc-ppcp-blocks-payment-method__label ${id}`}>\n            <Label text={title}/>\n            <PaymentMethodIcons icons={icons}/>\n        </div>\n    )\n};\n\nconst ErrorMessage = ({msg}) => {\n    if (msg) {\n        return (\n            <div className={'wc-ppcp-error__message'}>\n                {msg}\n            </div>\n        )\n    }\n    return null;\n}\n\nif (isExpressEnabled()) {\n    registerExpressPaymentMethod({\n        name: 'paymentplugins_ppcp_express',\n        canMakePayment: () => true,\n        content: <ExpressPaymentMethod/>,\n        edit: <ExpressPaymentMethod/>,\n        supports: {\n            features: data('features')\n        }\n    });\n}\n\nregisterPaymentMethod({\n    name: 'ppcp',\n    label: <PaymentMethodLabel\n        id='ppcp'\n        title={data('title')}\n        icons={data('icons')}/>,\n    ariaLabel: 'PayPal',\n    canMakePayment: () => true,\n    content: <PayPalPaymentMethod context={'checkout'} paymentMethodId={'ppcp'}/>,\n    edit: <PayPalPaymentMethod context={'checkout'} paymentMethodId={'ppcp'}/>,\n    supports: {\n        showSavedCards: false,\n        showSaveOption: false,\n        features: data('features')\n    }\n});\n\n\n\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","import {useEffect} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\n\nexport const useValidateCheckout = (\n    {\n        isExpress,\n        paymentData,\n        onCheckoutValidationBeforeProcessing\n    }) => {\n    useEffect(() => {\n        if (!isExpress) {\n            const unsubscribe = onCheckoutValidationBeforeProcessing(() => {\n                // validate that the order has been created.\n                if (!paymentData?.orderId) {\n                    return {\n                        errorMessage: __('Please click the PayPal button before placing your order.', 'pymntpl-paypal-woocommerce')\n                    }\n                }\n                return true;\n            });\n            return unsubscribe;\n        }\n    }, [isExpress, paymentData]);\n}","import {useEffect, useState} from '@wordpress/element';\n\nexport const usePayPalFundingSources = ({data, paypal, context, vault = false}) => {\n    const [sources, setSources] = useState(false);\n    useEffect(() => {\n        if (paypal) {\n            let sources = [];\n            const buttonOrder = data('buttonOrder', []);\n            if (context === 'express_checkout') {\n                if (data('paypalSections', []).includes(context)) {\n                    sources.push(paypal.FUNDING.PAYPAL);\n                }\n            } else {\n                sources.push(paypal.FUNDING.PAYPAL);\n            }\n            if (data('payLaterEnabled') && data('payLaterSections', []).includes(context)) {\n                if (vault) {\n                    sources.push(paypal.FUNDING.CREDIT)\n                } else {\n                    sources.push(paypal.FUNDING.PAYLATER)\n                }\n            }\n            if (data('cardEnabled') && data('creditCardSections', []).includes(context)) {\n                sources.push(paypal.FUNDING.CARD)\n            }\n            if (data('venmoEnabled') && data('venmoSections', []).includes(context)) {\n                sources.push(paypal.FUNDING.VENMO);\n            }\n            sources.sort((a, b) => {\n                return buttonOrder.indexOf(a) < buttonOrder.indexOf(b) ? -1 : 1;\n            });\n            setSources([...sources]);\n        }\n    }, [paypal]);\n\n    return sources;\n}","import {SHIPPING_OPTION_REGEX} from '@ppcp/utils';\nimport {getSetting} from '@woocommerce/settings';\n\nexport const getShippingOptionId = (packageId, rateId) => `${packageId}:${rateId}`;\n\nexport const getSelectedShippingOptionId = (shippingRates) => {\n    let shippingOption = '';\n    shippingRates.forEach((shippingPackage, idx) => {\n        shippingPackage.shipping_rates.forEach(rate => {\n            if (rate.selected) {\n                shippingOption = getShippingOptionId(idx, rate.rate_id);\n            }\n        });\n    });\n    return shippingOption;\n}\n\nexport const extractShippingRateParams = (id) => {\n    const result = id.match(SHIPPING_OPTION_REGEX);\n    if (result) {\n        const {1: packageIdx, 2: rate} = result;\n        return [rate, packageIdx];\n    }\n    return [];\n}\n\nexport const removeNumberPrecision = (value, unit) => {\n    return value / 10 ** unit;\n}\n\nexport const hasShippingOptions = (shippingRates) => shippingRates.map(rate => rate?.shipping_rates.length > 0).filter(Boolean).length > 0;\n\nexport const createPatchRequest = ({billing, shippingData, selectedShippingOption = null}) => {\n    const {shippingRates} = shippingData;\n    const {currency, cartTotal, cartTotalItems} = billing;\n    return [\n        {\n            'op': 'replace',\n            'path': '/purchase_units/@reference_id==\\'default\\'/amount',\n            'value': {\n                currency_code: currency.code,\n                value: removeNumberPrecision(cartTotal.value, currency.minorUnit),\n                breakdown: getAmountBreakdown(cartTotalItems, currency)\n            }\n        },\n        {\n            'op': !selectedShippingOption ? 'add' : 'replace',\n            'path': '/purchase_units/@reference_id==\\'default\\'/shipping/options',\n            'value': getFormattedShippingOptions(shippingRates)\n        }\n    ];\n};\n\nexport const getAmountBreakdown = (cartTotalItems, currency) => {\n    const breakdown = {\n        item_total: 0\n    };\n    for (const cartItem of cartTotalItems) {\n        switch (cartItem.key) {\n            case 'total_items':\n            case 'total_fees':\n                breakdown.item_total += cartItem.value;\n                break;\n            case 'total_discount':\n                breakdown.discount = getBreakdownItem(cartItem, currency);\n                break;\n            case 'total_shipping':\n                breakdown.shipping = getBreakdownItem(cartItem, currency)\n                break;\n            case 'total_tax':\n                breakdown.tax_total = getBreakdownItem(cartItem, currency)\n                break;\n        }\n    }\n    breakdown.item_total = {\n        value: removeNumberPrecision(breakdown.item_total, currency.minorUnit),\n        currency_code: currency.code\n    };\n    return breakdown;\n}\n\nexport const getFormattedShippingOptions = (shippingRates) => {\n    let options = [];\n    shippingRates.forEach((shippingPackage, idx) => {\n        let rates = shippingPackage.shipping_rates.map(rate => {\n            let txt = document.createElement('textarea');\n            txt.innerHTML = rate.name;\n            return {\n                id: getShippingOptionId(idx, rate.rate_id),\n                label: txt.value,\n                type: 'SHIPPING',\n                selected: rate.selected,\n                amount: {\n                    value: removeNumberPrecision(rate.price, rate.currency_minor_unit),\n                    currency_code: rate.currency_code\n                }\n            }\n        });\n        options = [...options, ...rates];\n    });\n    return options;\n}\n\nexport const getBreakdownItem = (cartItem, currency) => {\n    return {\n        value: removeNumberPrecision(cartItem.value, currency.minorUnit),\n        currency_code: currency.code\n    }\n}\nexport const getFormattedCartItems = (cartTotalItems, currency) => {\n    return cartTotalItems.map(cartItem => getFormattedCartItem(cartItem, currency));\n}\n\nexport const getFormattedCartItem = (cartItem, currency) => ({\n    name: cartItem.label,\n    unit_amount: {\n        value: removeNumberPrecision(cartItem.value, currency.minorUnit),\n        currency_code: currency.code\n    },\n    quantity: 1\n})\n\n/**\n * Returns a rest route in ajax form given a route path.\n * @param path\n * @returns {*}\n */\nexport const getRestPath = (path) => {\n    path = path.replace(/^\\//, '');\n    return getSetting('ppcpGeneralData')?.ajaxRestPath?.replace('%s', path);\n}\n\nexport const isUserAdmin = () => getSetting('ppcpGeneralData')?.isAdmin\n\nconst getLocaleFields = (country) => {\n    const countryLocale = getSetting('countryLocale', {});\n    let localeFields = {...countryLocale.default};\n    if (country && countryLocale.hasOwnProperty(country)) {\n        localeFields = Object.entries(countryLocale[country]).reduce((locale, [key, value]) => {\n            locale[key] = {...locale[key], ...value}\n            return locale;\n        }, localeFields);\n    }\n    return localeFields;\n}\n\nexport const isAddressValid = (address, exclude = []) => {\n    const fields = getLocaleFields(address.country);\n    for (const [key, value] of Object.entries(address)) {\n        if (!exclude.includes(key) && fields?.[key] && fields[key].required) {\n            if (isEmpty(value)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\n/**\n * Returns true if the provided value is empty.\n * @param value\n * @returns {boolean}\n */\nconst isEmpty = (value) => {\n    if (typeof value === 'string') {\n        return value.length == 0 || value == '';\n    }\n    if (Array.isArray(value)) {\n        return array.length == 0;\n    }\n    if (typeof value === 'object') {\n        return Object.keys(value).length == 0;\n    }\n    if (typeof value === 'undefined') {\n        return true;\n    }\n    return true;\n}\n\nexport const versionCompare = (ver1, ver2, compare) => {\n    switch (compare) {\n        case '<':\n            return ver1 < ver2;\n        case '>':\n            return ver1 > ver2;\n        case '<=':\n            return ver1 <= ver2;\n        case '>=':\n            return ver1 >= ver2;\n        case '=':\n            return ver1 == ver2;\n    }\n    return false;\n}\n\nexport const DEFAULT_SHIPPING_ADDRESS = {\n    'first_name': '',\n    'last_name': '',\n    'company': '',\n    'address_1': '',\n    'address_2': '',\n    'city': '',\n    'state': '',\n    'postcode': '',\n    'country': '',\n    'phone': '',\n}\n\nexport const DEFAULT_BILLING_ADDRESS = {\n    ...DEFAULT_SHIPPING_ADDRESS,\n    'email': ''\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}"],"names":["useLoadPayPalScript","params","useState","paypal","setPayPal","useEffect","loadPayPalSdk","then","useProcessPaymentFailure","event","responseTypes","messageContext","setPaymentData","unsubscribe","data","processingResponse","paymentDetails","ppcpErrorMessage","message","type","ERROR","useBreakpointWidth","width","node","className","window","innerWidth","windowWidth","setWindowWidth","element","setElement","handleResize","addEventListener","removeEventListener","clientWidth","classList","add","remove","getSetting","PayLaterMessaging","cart","isEnabled","extensions","context","enabled","el","useRef","cartTotals","currency","currency_code","total_price","options","useMemo","amount","currency_minor_unit","placement","Messages","render","current","TotalsWrapper","ref","registerPlugin","ExperimentalOrderMeta","scope","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","isOlderVersion","getData","defaultValue","ExpressPaymentMethod","props","PayPalPaymentMethod","isExpress","paymentMethodId","billing","shippingData","eventRegistration","emitResponse","onError","onClick","onClose","onSubmit","activePaymentMethod","excluded","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","error","setError","queryParams","vault","billingData","onPaymentProcessing","onCheckoutAfterProcessingWithError","onCheckoutValidationBeforeProcessing","noticeContexts","buttonsContainer","setButtonsContainer","useCallback","setButtonContainerRef","parentElement","paymentData","currentPaymentData","currentBillingData","currentShippingData","isEmpty","convertOrderDataToAddress","order","needsShipping","address","payer","address_line_1","purchase_units","shipping","convertPayPalAddressToCart","name","extractName","email_address","email","phone","phone_number","national_number","convertBillingTokenToAddress","payer_info","billing_address","shipping_address","first_name","last_name","Array","isArray","given_name","surname","convertShippingAddress","full_name","extractFullName","shippingAddress","orderId","billingToken","billingTokenData","response","meta","paymentMethodData","ppcp_paypal_order_id","ppcp_billing_token","DEFAULT_BILLING_ADDRESS","billingAddress","DEFAULT_SHIPPING_ADDRESS","SUCCESS","useProcessPayment","EXPRESS_PAYMENTS","errorMessage","__","useValidateCheckout","buttonStyles","currentBilling","currentData","buttonState","actions","isAddressValid","disableButtons","enableButtons","keys","forEach","disable","enable","getOptions","fundingSource","style","getButtonStyle","onApprove","onCancel","onInit","isCheckoutFlow","createOrder","onShippingChange","createBillingAgreement","styles","FUNDING","PAYPAL","PAYLATER","paylater","CREDIT","color","includes","CARD","card","VENMO","venmo","orderID","handleBillingToken","get","catch","setSelectedRates","intermediateAddress","selectedShippingOption","selected_shipping_option","id","apiFetch","method","url","getRestPath","order_id","shipping_method","extractShippingMethod","payment_method","code","reject","resolve","finally","extractShippingRateParams","address_provided","console","log","token","path","usePayPalOptions","intent","sources","setSources","buttonOrder","push","sort","a","b","usePayPalFundingSources","validAddress","isUserAdmin","href","e","preventDefault","Button","Buttons","driver","React","ReactDOM","BUTTONS","map","isEligible","ErrorMessage","msg","PaymentMethodLabel","components","title","icons","Label","PaymentMethodIcons","text","isExpressEnabled","registerExpressPaymentMethod","canMakePayment","content","edit","supports","features","registerPaymentMethod","label","ariaLabel","showSavedCards","showSaveOption","result","match","SHIPPING_OPTION_REGEX","packageIdx","replace","ajaxRestPath","isAdmin","getLocaleFields","country","countryLocale","localeFields","default","entries","reduce","locale","value","exclude","fields","required","array","_arrayLikeToArray","arr","len","arr2","_arrayWithoutHoles","asyncGeneratorStep","gen","_next","_throw","arg","info","done","Promise","_asyncToGenerator","fn","self","args","err","undefined","_defineProperty","obj","defineProperty","enumerable","configurable","writable","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_objectWithoutPropertiesLoose","sourceKeys","_slicedToArray","_i","_s","_e","_arr","_n","_d","next","unsupportedIterableToArray","_toConsumableArray","_typeof","constructor","_unsupportedIterableToArray","o","minLen","n","toString","slice","test"],"sourceRoot":""}