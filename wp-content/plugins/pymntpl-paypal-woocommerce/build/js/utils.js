/*! For license information please see utils.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.r(t),e.d(t,{SHIPPING_OPTION_REGEX:()=>E,convertCartAddressToPayPal:()=>N,convertPayPalAddressToCart:()=>L,extractFullName:()=>U,extractShippingMethod:()=>G,fieldsToJson:()=>T,getErrorMessage:()=>M,getFieldValue:()=>x,getPage:()=>$,getPayPalQueryParams:()=>I,getRestPath:()=>F,getRestRoute:()=>B,getSetting:()=>k,isPluginConnected:()=>J,isValid:()=>V,isValidAddress:()=>D,isValidFieldValue:()=>H,loadPayPalSdk:()=>A,setFieldValue:()=>q,setSetting:()=>C,submitErrorMessage:()=>R});const a=window.lodash,l=window.jQuery;var c=e.n(l);const u=window.wp.hooks;function s(e,t){void 0===t&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach((function(e){n.setAttribute(e,t[e]),"data-csp-nonce"===e&&n.setAttribute("nonce",t["data-csp-nonce"])})),n}function d(e,t){if(void 0===t&&(t=f()),v(e,t),"undefined"==typeof window)return t.resolve(null);var n=function(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),function(e){var t=e["merchant-id"],n=e["data-merchant-id"],r="",o="";Array.isArray(t)?t.length>1?(r="*",o=t.toString()):r=t.toString():"string"==typeof t&&t.length>0?r=t:"string"==typeof n&&n.length>0&&(r="*",o=n),e["merchant-id"]=r,e["data-merchant-id"]=o}(e);var n,r,o=Object.keys(e).filter((function(t){return void 0!==e[t]&&null!==e[t]&&""!==e[t]})).reduce((function(t,n){var r=e[n].toString();return"data-"===n.substring(0,5)?t.dataAttributes[n]=r:t.queryParams[n]=r,t}),{queryParams:{},dataAttributes:{}}),i=o.queryParams,a=o.dataAttributes;return{url:"".concat(t,"?").concat((n=i,r="",Object.keys(n).forEach((function(e){0!==r.length&&(r+="&"),r+=e+"="+n[e]})),r)),dataAttributes:a}}(e),r=n.url,o=n.dataAttributes,i=o["data-namespace"]||"paypal",a=p(i);return function(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(null===n)return null;var r=s(e,t),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(r.dataset).length)return null;var i=!0;return Object.keys(o.dataset).forEach((function(e){o.dataset[e]!==r.dataset[e]&&(i=!1)})),i?n:null}(r,o)&&a?t.resolve(a):function(e,t){void 0===t&&(t=f()),v(e,t);var n=e.url,r=e.attributes;if("string"!=typeof n||0===n.length)throw new Error("Invalid url.");if(void 0!==r&&"object"!=typeof r)throw new Error("Expected attributes to be an object.");return new t((function(e,t){if("undefined"==typeof window)return e();!function(e){var t=e.onSuccess,n=e.onError,r=s(e.url,e.attributes);r.onerror=n,r.onload=t,document.head.insertBefore(r,document.head.firstElementChild)}({url:n,attributes:r,onSuccess:function(){return e()},onError:function(){var e=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then((function(n){return 200===n.status&&t(e),n.text()})).then((function(e){var n=function(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}(e);t(new Error(n))})).catch((function(e){t(e)})):t(e)}})}))}({url:r,attributes:o},t).then((function(){var e=p(i);if(e)return e;throw new Error("The window.".concat(i," global variable is not available."))}))}function f(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function p(e){return window[e]}function v(e,t){if("object"!=typeof e||null===e)throw new Error("Expected an options object.");if(void 0!==t&&"function"!=typeof t)throw new Error("Expected PromisePonyfill to be a function.")}var y=["locale"];function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={},P=!1,O=new Map,j=null,E=/^([\w]+)\:(.+)$/,S={address_1:"address_line_1|line1",address_2:"address_line_2|line2",state:"admin_area_1|state",city:"admin_area_2|city",postcode:"postal_code",country:"country_code"},_={city:"city",state:"state",postal_code:"postcode",country_code:"country"},A=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){!t||(0,a.isEmpty)(t)||(0,a.isEqual)(t,w)?window.paypal&&!P?n(window.paypal):(u.defaultHooks.addAction("paypalInstanceCreated","wcPPCP",(function(e){n(e)})),u.defaultHooks.addAction("paypalLoadError","wcPPCP",(function(){r()}))):(w=t,window.paypal&&u.defaultHooks.doAction("paypalInstanceCleanup",window.paypal),P=!0,d(m({},t)).then((function(e){n(e),u.defaultHooks.doAction("paypalInstanceCreated",e,w)})).catch((function(i){var a;console.log(i);var l,c=(null==i||null===(a=i.message)||void 0===a?void 0:a.toLowerCase())||null;if(c){if(c.includes("locale")){t.locale;var s=o(t,y);return e(s).then((function(e){n(e)}))}c.includes("client-id not recognized")||c.includes("invalid query value for client-id")?l={code:"invalid_client_id"}:c.includes("invalid query value for currency")}u.defaultHooks.doAction("paypalLoadError"),r(l)})).finally((function(){P=!1})))}))},k=function(e){return void 0!==window.wcPPCPSettings&&window.wcPPCPSettings[e]||{}},C=function(e,t){if(void 0!==window.wcPPCPSettings)return window.wcPPCPSettings[e]=t},I=function(){return k("queryParams")},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"billing";return"shipping"!=e.substring(0,"shipping".length)&&"billing"!=e.substring(0,"billing".length)&&(e="".concat(t,"_").concat(e)),c()('[name="'.concat(e,'"]')).length?c()('[name="'.concat(e,'"]')).val():O.get(e)},T=function(){var e={};return O.forEach((function(t,n){e[n]=t})),e},q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"billing";n&&"shipping"!=e.substring(0,"shipping".length)&&"billing"!=e.substring(0,"billing".length)&&(e="".concat(n,"_").concat(e)),O.set(e,t),c()('[name="'.concat(e,'"]')).length&&c()('[name="'.concat(e,'"]')).val(t)},M=function(e){var t=k("errorMessages");return"string"==typeof e?e:null!=e&&e.code&&null!=t&&t[e.code]?t[e.code]:null!=e&&e.message?e.message:void 0},R=function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkout";if(null==e||null===(n=e.message)||void 0===n||null===(r=n.toLowerCase())||void 0===r||!r.match(/detected popup close|window is closed/)){var i=M(e),a="woocommerce-NoticeGroup",l=c()(t);"checkout"==o&&(a+=" woocommerce-NoticeGroup-checkout"),i='<div class="'+a+'"><ul class="woocommerce-error"><li>'+i+"</li></ul></div>",c()(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),l.prepend(i),c().scroll_to_notices?c().scroll_to_notices(l):c()("html, body").animate({scrollTop:l.offset().top-100},1e3)}},D=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o="undefined"==typeof wc_address_i18n_params?k("i18n"):wc_address_i18n_params;if((0,a.isEmpty)(e))return!1;if(j||(j=JSON.parse(o.locale.replace(/&quot;/g,'"'))),!e.country||(0,a.isEmpty)(e))return!1;var i=null!==(t=j)&&void 0!==t&&t[e.country]?j[e.country]:j.default;i=c().extend(!0,{},j.default,i);var l=Object.entries(i).filter((function(e){var t=r(e,2),o=t[0];return t[1],!n.includes(o)}));for(var u in i=Object.fromEntries(l)){var s;if(null!==(s=i[u])&&void 0!==s&&s.required){var d=(null==e?void 0:e[u])||null;if(!d||null==d||!d.trim())return!1}}return!0},N=function(e){var t={};for(var n in e)if(null!=S&&S[n])if(S[n].includes("|")){var o=r(S[n].split("|"),2),i=o[0];o[1],t[i]=e[n]}else t[S[n]]=e[n];return t},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};n=t?_:Object.fromEntries(Object.entries(S).map((function(e){var t=r(e,2),n=t[0];return[t[1],n]})));var o={};for(var i in n)if(i.includes("|")){var a,l=i.split("|"),c=g(l);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(e.hasOwnProperty(u)){o[n[i]]=e[u];break}o[n[i]]=""}}catch(e){c.e(e)}finally{c.f()}}else e.hasOwnProperty(i)?o[n[i]]=e[i]:o[n[i]]="";return o},H=function(e){var t;return!!(e=null===(t=e)||void 0===t?void 0:t.trim())},V=function(e){return H(x(e))},G=function(e){var t=e.match(E);return t?i({},t[1],t[2]):null},U=function(e){return[(e=e.trim()).split(" ").slice(0,-1).join(" "),e.split(" ").pop()]},B=function(e){var t,n,r;return(null===(t=k("generalData"))||void 0===t||null===(n=t.restRoutes)||void 0===n||null===(r=n[e])||void 0===r?void 0:r.url)||null},F=function(e){var t,n;return e=e.replace(/^\//,""),null===(t=k("generalData"))||void 0===t||null===(n=t.ajaxRestPath)||void 0===n?void 0:n.replace("%s",e)},$=function(){return k("generalData").page},J=function(){var e,t;return(null===(e=k("generalData"))||void 0===e||null===(t=e.clientId)||void 0===t?void 0:t.length)>0};(this.wcPPCP=this.wcPPCP||{}).utils=t})();
//# sourceMappingURL=utils.js.map